


{{>styleing}}

    
{{>header}}
    <div id="main-content">
      <div class="container-fluid">
        <div class="row">
          
            <div class="col-md-12">
      
                <!-- post-container -->
                <div class="post-container">
                  <h2 class="page-heading">My cart</h2>
                    <div class="post-content">
                
                    </div>
       
                    
                    
                 <input type="hidden" id='total-cart-product'value="{{records}}"/>  
                </div><!-- /post-container -->
            </div>
          </div>
        </div>
      </div>
   
    <script src='./jquery.min.js'></script>
    <script>
      $(document).ready(function(){
    function loadProduct(){
    
      let output="<table class='description-table'><tr><th></th><th>Products Name</th><th>Type</th><th>Price(%)</th><th>action</th></tr>";
         $.ajax({
            url:'/load-cart-products',
            type:'POST',
            success:function(data){
              data.forEach(element=>{
                 output=output.concat(`   <tr>
                               <td style="padding: 0px;">
                                <img src="${element.productId.images}" alt=""style='width:5rem;height:5rem;'/>
                              </td>
                              <td>${element.productId.product}</td>
                              <td>${element.productId.product_cat}</td>
                              <td>${element.productId.total_price}</td>
                              <td style="padding:10px;width:5rem;">
                                 <a class='read-more pull-left'  href='#' id='remove-cart' data-id=${element._id}>Remove</a>
                                <a class='read-more pull-right' href='/insert-order?id=${element.productId._id}}'>Order</a></td>

                   </tr>`);
                   output=output.concat('</table>');

                   $('.post-content').html(output);
              })
            }
         })

    }
    loadProduct();
      
          
  
     $(document).on('click','#remove-cart',function(){
            let id=$(this).data('id');
            
           $.ajax({
                 url:'/delete-cart-product',
                 type:'POST',
                 data:{id},
                 success:function(data){
                window.location.assign('/cart')
                }
             })
        
        });
      });
    </script>

